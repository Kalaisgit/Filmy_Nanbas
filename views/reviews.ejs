<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Movie Reviews</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link href="/styles/main.css" rel="stylesheet" />
  </head>
  <body>
    <div class="container mt-5">
      <h1>Movie Reviews</h1>
      <!-- Back to Home button -->
      <a href="/" class="btn btn-secondary mt-4 mb-3">Back to Home</a>
      <% if (reviews && reviews.length > 0) { %>
      <div class="reviews-section">
        <% reviews.forEach((review) => { %>
        <div class="review-item mb-5">
          <h2><%= review.film %> (<%= review.yor %>)</h2>
          <% if (review.poster) { %>
          <img
            src="<%= review.poster %>"
            alt="<%= review.film %> poster"
            class="img-fluid"
          />
          <% } %>
          <p><strong>Genre:</strong> <%= review.genre %></p>
          <p><strong>Rating:</strong> <%= review.rating %></p>
          <p><strong>Review:</strong> <%= review.review %></p>

          <div class="d-grid gap-2 d-md-flex justify-content-md-start mt-2">
            <a href="/edit-review/<%= review.id %>" class="btn btn-warning"
              >Edit</a
            >
            <form
              action="/delete-review/<%= review.id %>"
              method="POST"
              onsubmit="return confirm('Are you sure you want to delete this review?');"
            >
              <button type="submit" class="btn btn-danger">Delete</button>
            </form>
          </div>
        </div>
        <% }); %>
      </div>
      <% } else { %>
      <p>No reviews available.</p>
      <% } %>
    </div>
  </body>
</html>
